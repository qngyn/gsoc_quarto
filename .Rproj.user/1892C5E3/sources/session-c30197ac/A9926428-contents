library(httr)
convert_text_to_speech <- function(text, api_key) {
  # API endpoint
  endpoint <- "http://api.voicerss.org/"
  
  # API parameters
  params <- list(key = api_key, src = text, hl = "en-us", c = "MP3", f = "44khz_16bit_stereo")
  
  # Make POST request to VoiceRSS API
  response <- POST(endpoint, body = params)
  
  # Check if request was successful
  if (http_error(response)) {
    stop("Error:", content(response, "text"))
  } else {
    # Return audio content
    return(content(response, "raw"))
  }
}

api_key <- "7634fb7204ef42af94324588155a32d7"
text <- "Hello, this is a test message."
audio_content <- convert_text_to_speech(text, api_key)
writeBin(audio_content, "output2.mp3")
cat("Audio file generated successfully: output2.mp3\n")